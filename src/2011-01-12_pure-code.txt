====================
代码重构——发现纯函数
====================

.. meta::
    :keywords: 重构 纯函数 IO 输入输出
    :description: 发现纯函数，就是发现系统核心逻辑，提取（抽象）成不依赖IO，不依赖全局状态的代码，重新设计纯的输入和返回的数据结构，将他们置入独立的模块。

最近重构了一些旧代码，不知不觉发现有模式从中涌现，总结起来一句话：“发现纯函数”。

函数式程序员，你懂的。

发现纯函数，就是发现系统核心逻辑，提取（抽象）成不依赖IO，不依赖全局状态的代码，重新设计纯的输入和返回的数据结构，将他们置入独立的模块。

好处至少有三：

#. 强迫自己提取纯函数后，必然带来对周边输入输出代码的重构，从这个方向入手，系统只会变得更清晰。

#. 纯函数容易理解，容易测试，容易维护。

#. 纯函数不依赖IO，对于我们这种web应用来说，瓶颈从来不会在这里。并且通过合并周边IO相关代码，更容易发现性能瓶颈，也容易发现进一步优化的空间。

朋友，请你记住这个原则，未来的路上你会收获很多，谢谢。
